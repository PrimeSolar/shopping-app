const db=new Dexie("ShoppingApp");db.version(1).stores({items:"++id, description, price, quantity"});const itemForm=document.getElementById("itemForm"),itemsDiv=document.getElementById("itemsDiv"),totalPriceDiv=document.getElementById("totalPriceDiv");async function displayItems(){itemsDiv.innerHTML="";const e=await db.items.toArray();let t=0;e.forEach((e=>{const n=document.createElement("div");n.className="item",n.innerHTML=`\n            <label>\n                <input type="checkbox" class="checkbox" />\n            </label>\n            <div class="itemInfo">\n                <p>${e.description}</p>\n                <p>${e.quantity} x ${e.price}$</p>\n            </div>\n            <button type="button" class="deleteButton" onclick="deleteItem(${e.id})">x</button>\n        `,itemsDiv.appendChild(n),t+=e.quantity*e.price})),totalPriceDiv.innerText=`Total Price: ${t}$`;for(let e of document.querySelectorAll(".checkbox"))e.addEventListener("click",(function(){this.closest(".item").querySelector(".itemInfo").classList.toggle("purchased")}))}async function deleteItem(e){await db.items.delete(e),displayItems()}document.addEventListener("DOMContentLoaded",displayItems),itemForm.onsubmit=async e=>{e.preventDefault();const t=document.getElementById("nameInput").value,n=parseInt(document.getElementById("quantityInput").value,10),i=parseFloat(document.getElementById("priceInput").value);await db.items.add({description:t,quantity:n,price:i}),itemForm.reset(),displayItems()};
